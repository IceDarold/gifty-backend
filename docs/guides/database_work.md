# Гайд по работе с базой данных

Этот документ описывает базовые правила и практики работы с базой данных Gifty: как безопасно выполнять запросы, где искать схему, и как оформлять изменения.

## Роли и ответственность

- Доступ к базе выдается по необходимости и в рамках вашей роли.
- Любые изменения схемы должны быть согласованы с ментором или ответственным за БД.

## Безопасная работа с данными

1. Всегда проверяйте окружение, в котором работаете.
2. Избегайте изменений в проде без явного согласования.
3. Для массовых обновлений используйте транзакции и делайте предварительный `SELECT`.
4. Не выгружайте персональные данные вне защищенных каналов.

## Как смотреть схему

- Используйте DataGrip для навигации по таблицам, индексам и связям.
- Для сложных объектов ищите миграции в репозитории (каталог `alembic`).

## Изменения схемы (миграции)

Если требуется изменить структуру базы:

1. Создайте миграцию через Alembic.
2. Добавьте описание изменений.
3. Согласуйте миграцию на ревью.
4. Запускайте миграции только в согласованных окружениях.

## Практики запроса данных

- Всегда ограничивайте выборку (`LIMIT`), пока не уверены в объеме.
- Добавляйте условия по ключам/индексам.
- Для аналитических запросов используйте отдельные витрины, если они есть.

## Частые вопросы

**Где взять доступ?**

Через телеграм‑бота или у ментора. Инструкции по подключению доступны в онбординге.

**Кого спросить, если что-то не так?**

Обратитесь к ментору и опишите проблему, укажите ошибку подключения или текст запроса.

