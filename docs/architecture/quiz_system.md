# Система Интеллектуального Квиза (Gifty Quiz System)

> **Глобальная Цель:** Сузить пространство поиска из миллионов товаров до ~50 релевантных кандидатов и определить стратегию ранжирования.

Квиз — это не просто анкета. Каждый блок вопросов выполняет конкретную архитектурную функцию: либо устанавливает **Жесткие Фильтры (Hard Filters)**, либо задает **Векторы Ранжирования (Ranking Vectors)**.

---

## Блок 1: Контекст Дарителя (The Giver's Constraints)

**Цель:** Установить "Правила Игры". Это технические и социальные ограничения, которые накладывает сам даритель.

### 1.1. Социальная Дистанция (Relationship)
*   **Архитектурная функция:** Фильтр допустимой интимности (Intimacy Filter).
*   **Зачем:** Определяет, какие категории подарков социально приемлемы.
*   **Логика:**
    *   *Partner/Best Friend:* Разрешены личные, сентиментальные (Anchor), тактильные товары.
    *   *Colleague/Boss:* Жесткий блок на интимные категории (белье, гигиена, романтика). Приоритет статусных (Permission) и полезных (Optimizer) вещей.
    *   *Relative:* Акцент на заботу (Optimizer) и традиции (Anchor).

### 1.2. Ресурс Дарителя (Effort & Time)
*   **Архитектурная функция:** Фильтр сложности исполнения (Execution Complexity Filter).
*   **Зачем:** Отсекает идеи, которые даритель не готов или не успеет реализовать.
*   **Логика:**
    *   *Low Effort / Last Minute:* Скрываем DIY-наборы, сложные квесты, товары с долгой кастомизацией. Показываем готовые боксы и сертификаты.
    *   *High Effort:* Разблокируем сложные сценарии "Catalyst" (организация впечатления) и "Anchor" (создание фотоальбома).

### 1.3. Интенция (Goal)
*   **Архитектурная функция:** Главный вектор ранжирования (Primary Ranking Vector).
*   **Зачем:** Определяет эмоциональную цель подарка. Один и тот же интерес (напр., "Кофе") может быть подан по-разному.
*   **Логика:**
    *   *Impress (Вау-эффект):* Ищем редкое, уникальное, трендовое. (Mirror/Catalyst).
    *   *Care (Забота):* Ищем полезное, упрощающее жизнь, качественное. (Optimizer).
    *   *Formal (Протокол):* Ищем безопасное, премиальное, общепризнанное. (Permission).

---

## Блок 2: Фактура Личности (The Recipient's Semantic Field)

**Цель:** Собрать "Семантическое Облако" (Semantic Seeds). Это сырые данные для генерации гипотез.

### 2.1. Демографический Базис (Demographics)
*   **Архитектурная функция:** Калибровка базовой вероятности (Baseline Calibration).
*   **Зачем:** Решение проблемы холодного старта (Cold Start) и отсечение возрастных несоответствий.
*   **Логика:**
    *   Пол и возраст дают начальные статистические веса категориям товаров.
    *   Предотвращает грубые ошибки (напр., детские игрушки для взрослого, если это не кидалты).

### 2.2. Области Интереса (Topic Analysis)
*   **Архитектурная функция:** Топливо для Генератора Гипотез (DHG Fuel).
*   **Зачем:** Определяет тематические кластеры, в которых мы будем искать решения.
*   **Логика:**
    *   Мы не просим выбрать товары. Мы просим назвать **Темы** (Контексты), в которых живет человек.
    *   *Ввод:* Слова-теги (напр., "Рыбалка", "Python", "Йога").
    *   *Обработка:* LLM расширяет эти теги в конкретные поисковые запросы, адаптированные под Интенцию из Блока 1. (Рыбалка + Care = "Удобное кресло", Рыбалка + Impress = "Эхолот").

---

## Блок 3: Психометрия (GUTG Mapping)

*(На стадии проектирования. Требуется разработать вопросы, определяющие глубинные драйверы потребления: Дефицит, Энергию и Архетип)*.

---

## Интеграция: Data Flow

```json
{
  "constraints": {
    "relationship": "colleague", // Intimacy Filter: Low
    "effort": "low",             // Complexity Filter: Low
    "goal": "protocol"           // Ranking: Safe Bets > Unique
  },
  "recipient_profile": {
    "age": 35,
    "gender": "male",
    "topics": ["coffee", "startups"] // Semantic Seeds
  },
  "gutg_weights": {
    // Будет заполнено после проработки Блока 3
  }
}
```
