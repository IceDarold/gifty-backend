# –ë–∏–∑–Ω–µ—Å-–º–µ—Ç—Ä–∏–∫–∏ –∏ KPI üìä

–û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø—Ä–æ–¥—É–∫—Ç–∞, –≤–æ—Ä–æ–Ω–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç—Ä–µ–Ω–¥—ã.

### 1. –û—Å–Ω–æ–≤–Ω—ã–µ KPI (`/stats`)
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–ª—é—á–µ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 24 —á–∞—Å–∞ –∏ 7 –¥–Ω–µ–π.

*   **URL**: `/analytics/stats`
*   **–ú–µ—Ç–æ–¥**: `GET`
*   **Response**:
    ```json
    {
      "dau": 150,
      "quiz_completion_rate": 65.5,
      "gift_ctr": 12.3,
      "total_sessions": 450,
      "last_updated": "2024-02-10T12:00:00Z"
    }
    ```

**–ü–æ–ª—è –æ—Ç–≤–µ—Ç–∞:**
- `dau`: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∑–∞ 24 —á–∞—Å–∞.
- `quiz_completion_rate`: % –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö –∫–≤–∏–∑–æ–≤ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π.
- `gift_ctr`: % –∫–ª–∏–∫–æ–≤ –ø–æ —Ç–æ–≤–∞—Ä–∞–º –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –æ–±—â–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ–∫–∞–∑–æ–≤ –≤—ã–¥–∞—á–∏.
- `total_sessions`: –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞—á–∞—Ç—ã—Ö –∫–≤–∏–∑–æ–≤ –∑–∞ 7 –¥–Ω–µ–π.

---

### 2. –¢—Ä–µ–Ω–¥—ã –∏ –ì—Ä–∞—Ñ–∏–∫–∏ (`/trends`)
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä—è–¥—ã –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –ª–∏–Ω–µ–π–Ω—ã—Ö –≥—Ä–∞—Ñ–∏–∫–æ–≤.

*   **URL**: `/analytics/trends`
*   **–ú–µ—Ç–æ–¥**: `GET`
*   **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**:
    - `days` (query, optional): –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ (default: 7, max: 90).
*   **Response**:
    ```json
    {
      "dates": ["2024-02-03", "2024-02-04", ...],
      "dau_trend": [120, 145, ...],
      "quiz_starts": [50, 62, ...],
      "last_updated": "2024-02-10T12:00:00Z"
    }
    ```

---

### 3. –í–æ—Ä–æ–Ω–∫–∞ –ö–æ–Ω–≤–µ—Ä—Å–∏–∏ (`/funnel`)
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –æ—Å–Ω–æ–≤–Ω—ã—Ö —ç—Ç–∞–ø–æ–≤ –ø—Ä–æ–¥—É–∫—Ç–∞ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 30 –¥–Ω–µ–π.

*   **URL**: `/analytics/funnel`
*   **–ú–µ—Ç–æ–¥**: `GET`
*   **Response**:
    ```json
    {
      "steps": [
        { "name": "quiz_started", "count": 1000, "conversion_rate": 100.0 },
        { "name": "quiz_completed", "count": 650, "conversion_rate": 65.0 },
        { "name": "results_shown", "count": 600, "conversion_rate": 92.3 },
        { "name": "gift_clicked", "count": 80, "conversion_rate": 13.3 }
      ],
      "last_updated": "2024-02-10T12:00:00Z"
    }
    ```
