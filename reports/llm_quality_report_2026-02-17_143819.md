# LLM Quality Report — 2026-02-17 14:38:19

## Summary
- Total scenarios: 8
- Pass: 6
- Warning: 2
- Fail: 0

---

## Scenario: Init Session: Lego + Coffee + Travel

**Input**
```json
{
  "quiz": {
    "relationship": null,
    "gifting_goal": null,
    "effort_level": "low",
    "session_mode": "thoughtful",
    "budget": null,
    "deadline_days": null,
    "language": "ru",
    "recipient_age": 28,
    "recipient_gender": "male",
    "occasion": null,
    "vibe": null,
    "interests": [
      "Лего и кофе",
      "Путешествия"
    ],
    "interests_description": null
  }
}
```

**LLM Timings**
- `normalize_topics`: 0.58s
- `generate_hypotheses_bulk`: 2.46s
- `classify_topic`: 0.46s
- `classify_topic`: 0.48s
- `classify_topic`: 0.66s
- `generate_hypotheses`: 2.06s
- `generate_hypotheses`: 2.45s

**Outputs**
- llm_raw:normalize_topics
```json
[
  "Лего",
  "Кофе",
  "Путешествия"
]
```
- llm_raw:generate_hypotheses_bulk
```json
{
  "Лего": {
    "is_wide": false,
    "hypotheses": [
      {
        "title": "Лего-набор для взрослых",
        "description": "Уникальный Лего-набор, предназначенный для взрослых, который позволит реализовать творчество и расслабиться",
        "primary_gap": "the_mirror",
        "reasoning": "Поскольку получатель интересуется Лего, этот набор может помочь ему выразить свою индивидуальность и творчество",
        "search_queries": [
          "Лего-наборы для взрослых",
          "Уникальные Лего-наборы"
        ]
      },
      {
        "title": "Лего-курс для начинающих",
        "description": "Онлайн-курс или мастер-класс по Лего, который позволит получателю улучшить свои навыки и научиться новым техникам",
        "primary_gap": "the_catalyst",
        "reasoning": "Этот курс может помочь получателю развить свои навыки и интересы в области Лего",
        "search_queries": [
          "Лего-курсы для начинающих",
          "Онлайн-курсы по Лего"
        ]
      },
      {
        "title": "Лего-календарь",
        "description": "Лего-календарь, который позволит получателю создавать новые модели каждый день",
        "primary_gap": "the_anchor",
        "reasoning": "Этот календарь может стать интересным и полезным подарком для получателя, который любит Лего",
        "search_queries": [
          "Лего-календари",
          "Лего-календарь для взрослых"
        ]
      }
    ]
  },
  "Кофе": {
    "is_wide": false,
    "hypotheses": [
      {
        "title": "Кофемашинка для дома",
        "description": "Высококачественная кофемашинка, которая позволит получателю наслаждаться его любимым кофе в любое время",
        "primary_gap": "the_optimizer",
        "reasoning": "Поскольку получатель интересуется кофе, эта кофемашинка может сделать его жизнь проще и более приятной",
        "search_queries": [
          "Кофемашинки для дома",
          "Высококачественные кофемашинки"
        ]
      },
      {
        "title": "Кофейный мастер-класс",
        "description": "Мастер-класс по приготовлению кофе, который позволит получателю научиться новым техникам и улучшить свои навыки",
        "primary_gap": "the_catalyst",
        "reasoning": "Этот мастер-класс может помочь получателю развить свои интересы и навыки в области кофе",
        "search_queries": [
          "Кофейные мастер-классы",
          "Мастер-классы по приготовлению кофе"
        ]
      },
      {
        "title": "Кофейный набор",
        "description": "Набор кофе и аксессуаров, который позволит получателю наслаждаться его любимым кофе в любое время",
        "primary_gap": "the_permission",
        "reasoning": "Этот набор может стать интересным и полезным подарком для получателя, который любит кофе",
        "search_queries": [
          "Кофейные наборы",
          "Наборы кофе и аксессуаров"
        ]
      }
    ]
  },
  "Путешествия": {
    "is_wide": true,
    "question": "Какой тип путешествий предпочитает получатель: городские, природные, культурные или приключенческие?",
    "branches": [
      "Городские путешествия",
      "Природные путешествия",
      "Культурные путешествия",
      "Приключенческие путешествия"
    ]
  }
}
```
- llm_raw:classify_topic
```json
{
  "is_wide": false,
  "branches": null,
  "question": null,
  "refined_topic": "Лего и кофе"
}
```
- llm_raw:classify_topic
```json
{
  "is_wide": false,
  "branches": null,
  "question": null,
  "refined_topic": "Лего для взрослых с кофейной тематикой"
}
```
- llm_raw:classify_topic
```json
{
  "is_wide": true,
  "branches": [
    "горные лыжи",
    "пляжный отдых",
    "городские туры",
    "приключенческие путешествия"
  ],
  "question": "Какой тип путешествий больше всего нравится получателю?",
  "refined_topic": null
}
```
- llm_raw:generate_hypotheses
```json
[
  {
    "title": "Лего-кафе на выезде",
    "description": "Портативный кофейный набор и миниатюрная лего-сцена для путешествий",
    "primary_gap": "the_catalyst",
    "reasoning": "Поскольку интересы получателя включают путешествия, этот подарок поддержит его любовь к исследованию новых мест и возможность наслаждаться кофе и лего где угодно.",
    "search_queries": [
      "портативный кофейный набор",
      "миниатюрная лего-сцена",
      "лего для путешествий"
    ]
  },
  {
    "title": "Кофейный ритуал с лего-элементами",
    "description": "Набор кофейных чашек с лего-элементами и кофемашинка для дома",
    "primary_gap": "the_mirror",
    "reasoning": "Этот подарок отражает любовь получателя к кофе и лего, позволяя ему создать свой уникальный кофейный ритуал и демонстрировать свою личность.",
    "search_queries": [
      "кофейные чашки с лего-элементами",
      "кофемашинка для дома",
      "лего-кофейный набор"
    ]
  },
  {
    "title": "Лего-кофейный опыт",
    "description": "Кофейный мастер-класс с лего-элементами и кофейным дегустационным набором",
    "primary_gap": "the_permission",
    "reasoning": "Этот подарок дает получателю возможность наслаждаться кофе и лего в новом и уникальном формате, позволяя ему расслабиться и насладиться своим хобби.",
    "search_queries": [
      "кофейный мастер-класс",
      "лего-кофейный опыт",
      "кофейный дегустационный набор"
    ]
  },
  {
    "title": "Лего-кофейный журнал",
    "description": "Журнал для записи кофейных рецептов и лего-иллюстраций",
    "primary_gap": "the_anchor",
    "reasoning": "Этот подарок создает связь между получателем и его любовью к кофе и лего, позволяя ему записывать свои кофейные рецепты и создавать уникальные лего-иллюстрации.",
    "search_queries": [
      "журнал для кофейных рецептов",
      "лего-иллюстрации",
      "кофейный журнал"
    ]
  }
]
```
- llm_raw:generate_hypotheses
```json
[
  {
    "title": "Кофейная станция из Лего",
    "description": "Набор для строительства кофейной станции, где можно хранить кофе, сахар и другие принадлежности",
    "primary_gap": "the_optimizer",
    "reasoning": "Посколькуrecipient интересуется кофе и Лего, этот подарок объединяет оба интереса и помогает организовать кофейный уголок в доме, делая жизнь более удобной",
    "search_queries": [
      "Лего кофейная станция",
      "Кофейный уголок из Лего",
      "Лего организатор для кофе"
    ]
  },
  {
    "title": "Лего-кубик с кофейным ароматом",
    "description": "Набор для строительства кубика с кофейным ароматом, который можно использовать как сувенир или украшение",
    "primary_gap": "the_mirror",
    "reasoning": "Этот подарок показывает, что даритель понимает и ценит интересы recipientа, предлагая уникальный и запоминающийся предмет, который отражает его личность",
    "search_queries": [
      "Лего кубик с ароматом",
      "Кофейный кубик из Лего",
      "Лего сувенир для кофейных любителей"
    ]
  },
  {
    "title": "Кофейный мастер-класс с Лего-элементами",
    "description": "Мастер-класс, где участники могут научиться готовить кофе и строить кофейные тематические модели из Лего",
    "primary_gap": "the_catalyst",
    "reasoning": "Поскольку recipient интересуется кофе и путешествиями, этот подарок предлагает новый опыт и возможность научиться новому, а также объединяет интересы в уникальной форме",
    "search_queries": [
      "Кофейный мастер-класс с Лего",
      "Лего кофейный класс",
      "Кофе и Лего опыт"
    ]
  },
  {
    "title": "Лего-календарь с кофейными иллюстрациями",
    "description": "Календарь, где каждый месяц представлен кофейной иллюстрацией, выполненной из Лего",
    "primary_gap": "the_anchor",
    "reasoning": "Этот подарок создает ощущение связи и традиции, поскольку recipient может наслаждаться кофейными иллюстрациями каждый месяц, а также демонстрирует интерес дарителя к его интересам",
    "search_queries": [
      "Лего кофейный календарь",
      "Кофейные иллюстрации из Лего",
      "Лего календарь для кофейных любителей"
    ]
  }
]
```
- session.topics
```json
[
  "Лего",
  "Кофе",
  "Путешествия"
]
```
- tracks.summary
```json
[
  {
    "topic": "Лего",
    "status": "ready",
    "hypotheses": [
      "Кофейная станция из Лего",
      "Лего-кубик с кофейным ароматом",
      "Кофейный мастер-класс с Лего-элементами",
      "Лего-календарь с кофейными иллюстрациями"
    ],
    "question": null,
    "question_options": []
  },
  {
    "topic": "Кофе",
    "status": "ready",
    "hypotheses": [
      "Лего-кафе на выезде",
      "Кофейный ритуал с лего-элементами",
      "Лего-кофейный опыт",
      "Лего-кофейный журнал"
    ],
    "question": null,
    "question_options": []
  },
  {
    "topic": "Путешествия",
    "status": "question",
    "hypotheses": [],
    "question": "Какой тип путешествий больше всего нравится получателю?",
    "question_options": [
      "горные лыжи",
      "пляжный отдых",
      "городские туры",
      "приключенческие путешествия"
    ]
  }
]
```

**Checks**
- [PASS] session has tracks or probe
- [PASS] hypotheses have titles
- [PASS] no duplicate hypothesis titles
- [PASS] RU language output

---

## Scenario: Init Session: Wide Topic: Music

**Input**
```json
{
  "quiz": {
    "relationship": null,
    "gifting_goal": null,
    "effort_level": "low",
    "session_mode": "thoughtful",
    "budget": null,
    "deadline_days": null,
    "language": "ru",
    "recipient_age": 35,
    "recipient_gender": "female",
    "occasion": null,
    "vibe": null,
    "interests": [
      "Музыка"
    ],
    "interests_description": null
  }
}
```

**LLM Timings**
- `normalize_topics`: 0.41s
- `generate_hypotheses_bulk`: 0.71s

**Outputs**
- llm_raw:normalize_topics
```json
[
  "Музыка"
]
```
- llm_raw:generate_hypotheses_bulk
```json
{
  "Музыка": {
    "is_wide": true,
    "question": "Какая область музыки больше всего интересует получателя? Например, посещение концертов, коллекционирование виниловых пластинок или создание собственной музыки?",
    "branches": [
      "Виниловые пластинки",
      "Концертные билеты",
      "Музыкальное оборудование для дома"
    ]
  }
}
```
- session.topics
```json
[
  "Музыка"
]
```
- tracks.summary
```json
[
  {
    "topic": "Музыка",
    "status": "question",
    "hypotheses": [],
    "question": "Какая область музыки больше всего интересует получателя? Например, посещение концертов, коллекционирование виниловых пластинок или создание собственной музыки?",
    "question_options": [
      "Виниловые пластинки",
      "Концертные билеты",
      "Музыкальное оборудование для дома"
    ]
  }
]
```

**Checks**
- [PASS] session has tracks or probe
- [PASS] hypotheses have titles
- [PASS] no duplicate hypothesis titles
- [WARN] RU language output

---

## Scenario: Init Session: Narrow Topic: Vinyl 70s

**Input**
```json
{
  "quiz": {
    "relationship": null,
    "gifting_goal": null,
    "effort_level": "low",
    "session_mode": "thoughtful",
    "budget": null,
    "deadline_days": null,
    "language": "ru",
    "recipient_age": 42,
    "recipient_gender": "male",
    "occasion": null,
    "vibe": null,
    "interests": [
      "Виниловые проигрыватели 70-х"
    ],
    "interests_description": null
  }
}
```

**LLM Timings**
- `normalize_topics`: 0.33s
- `generate_hypotheses_bulk`: 1.70s
- `classify_topic`: 5.62s
- `generate_hypotheses`: 8.11s

**Outputs**
- llm_raw:normalize_topics
```json
[
  "Виниловые проигрыватели"
]
```
- llm_raw:generate_hypotheses_bulk
```json
{
  "Виниловые проигрыватели": {
    "is_wide": false,
    "hypotheses": [
      {
        "title": "Виниловая пластинка редкого исполнителя 70-х",
        "description": "Подарок, который позволит ему дополнить свою коллекцию виниловых пластинок и насладиться музыкой его любимого исполнителя",
        "primary_gap": "the_mirror",
        "reasoning": "Поскольку он интересуется виниловыми проигрывателями 70-х, этот подарок будет ему особенно интересен и позволит ему sentir себя частью своего любимого жанра музыки",
        "search_queries": [
          "редкие виниловые пластинки 70-х",
          "виниловые пластинки его любимого исполнителя"
        ]
      },
      {
        "title": "Устройство для очистки виниловых пластинок",
        "description": "Практичный подарок, который поможет ему сохранить его коллекцию виниловых пластинок в хорошем состоянии",
        "primary_gap": "the_optimizer",
        "reasoning": "Этот подарок будет полезен для него, поскольку он заботится о своей коллекции и хочет сохранить ее в хорошем состоянии",
        "search_queries": [
          "устройство для очистки виниловых пластинок",
          "очистка виниловых пластинок в домашних условиях"
        ]
      },
      {
        "title": "Книга о истории виниловых проигрывателей",
        "description": "Подарок, который позволит ему узнать больше о истории виниловых проигрывателей и их развитии",
        "primary_gap": "the_catalyst",
        "reasoning": "Этот подарок будет интересен ему, поскольку он интересуется виниловыми проигрывателями и хочет узнать больше о их истории",
        "search_queries": [
          "книги о виниловых проигрывателях",
          "история виниловых проигрывателей"
        ]
      }
    ]
  }
}
```
- llm_raw:classify_topic
```json
{
  "is_wide": false,
  "branches": null,
  "question": null,
  "refined_topic": "Виниловые проигрыватели 70-х"
}
```
- llm_raw:generate_hypotheses
```json
[
  {
    "title": "Ретро-виниловый проигрыватель с современным звуком",
    "description": "Виниловый проигрыватель, сочетающий ретро-дизайн 70-х с современными технологиями для улучшения звука",
    "primary_gap": "the_optimizer",
    "reasoning": "Поскольку у получателя есть интерес к виниловым проигрывателям 70-х, он, вероятно, ценит ностальгию и уникальный звук винила. Однако современные технологии могут улучшить качество звука, сделав прослушивание более комфортным и приятным. Эта идея подходит для получения опыта 'the_optimizer', поскольку она решает проблему несовершенного звука старых проигрывателей.",
    "search_queries": [
      "ретро-виниловый проигрыватель",
      "современный звук",
      "винил проигрыватель 70-х"
    ]
  },
  {
    "title": "Книга об истории музыки 70-х",
    "description": "Книга, рассказывающая об истории музыки 70-х, с интересными фактами и анекдотами о легендарных музыкантах и группах",
    "primary_gap": "the_catalyst",
    "reasoning": "Получатель, интересующийся виниловыми проигрывателями 70-х, вероятно, любит музыку того времени. Эта книга может стать катализатором для дальнейшего изучения и открытия новых музыкальных направлений, а также предоставить дополнительный контекст для понимания истории виниловых проигрывателей.",
    "search_queries": [
      "книга об истории музыки 70-х",
      "легендарные музыканты",
      "музыкальная история"
    ]
  },
  {
    "title": "Набор виниловых пластинок редких исполнителей 70-х",
    "description": "Набор виниловых пластинок редких исполнителей 70-х, позволяющий получателю расширить свою музыкальную коллекцию и открыть новые звуки",
    "primary_gap": "the_mirror",
    "reasoning": "Поскольку получатель интересуется виниловыми проигрывателями 70-х, он, вероятно, ценит уникальность и редкость музыкальных коллекций. Этот набор пластинок может стать отражением его индивидуальности и музыкальных предпочтений, а также дать возможность открыть новые звуки и исполнителей.",
    "search_queries": [
      "виниловые пластинки редких исполнителей 70-х",
      "музыкальная коллекция",
      "виниловые проигрыватели"
    ]
  },
  {
    "title": "Декоративная подставка для виниловых проигрывателей в стиле 70-х",
    "description": "Декоративная подставка для виниловых проигрывателей, выполненная в стиле 70-х, которая может стать не только функциональным предметом, но и украшением интерьера",
    "primary_gap": "the_anchor",
    "reasoning": "Получатель, интересующийся виниловыми проигрывателями 70-х, вероятно, ценит эстетику и стиль того времени. Эта декоративная подставка может стать символом его любви к виниловым проигрывателям и музыке 70-х, а также создать ощущение связи с прошлым.",
    "search_queries": [
      "декоративная подставка для виниловых проигрывателей",
      "стиль 70-х",
      "виниловые проигрыватели"
    ]
  }
]
```
- session.topics
```json
[
  "Виниловые проигрыватели"
]
```
- tracks.summary
```json
[
  {
    "topic": "Виниловые проигрыватели",
    "status": "ready",
    "hypotheses": [
      "Ретро-виниловый проигрыватель с современным звуком",
      "Книга об истории музыки 70-х",
      "Набор виниловых пластинок редких исполнителей 70-х",
      "Декоративная подставка для виниловых проигрывателей в стиле 70-х"
    ],
    "question": null,
    "question_options": []
  }
]
```

**Checks**
- [PASS] session has tracks or probe
- [PASS] hypotheses have titles
- [PASS] no duplicate hypothesis titles
- [PASS] RU language output

---

## Scenario: Init Session: Complex Mix

**Input**
```json
{
  "quiz": {
    "relationship": null,
    "gifting_goal": null,
    "effort_level": "low",
    "session_mode": "thoughtful",
    "budget": null,
    "deadline_days": null,
    "language": "ru",
    "recipient_age": 30,
    "recipient_gender": "female",
    "occasion": null,
    "vibe": null,
    "interests": [
      "биохакинг",
      "миксология",
      "инди-игры"
    ],
    "interests_description": null
  }
}
```

**LLM Timings**
- `normalize_topics`: 5.60s
- `generate_hypotheses_bulk`: 7.57s
- `classify_topic`: 5.93s
- `classify_topic`: 15.86s
- `classify_topic`: 15.87s
- `generate_hypotheses`: 7.66s
- `generate_hypotheses`: 18.37s

**Outputs**
- llm_raw:normalize_topics
```json
[
  "биохакинг",
  "миксология",
  "инди-игры"
]
```
- llm_raw:generate_hypotheses_bulk
```json
{
  "биохакинг": {
    "is_wide": false,
    "hypotheses": [
      {
        "title": "Курс по биохакингу для начинающих",
        "description": "Онлайн-курс, который познакомит с основами биохакинга и поможет понять, как улучшить свое здоровье и благополучие",
        "primary_gap": "the_catalyst",
        "reasoning": "Поскольку биохакинг является одним из интересов получателя, этот курс может помочь ему глубже понять тему и начать применять ее на практике",
        "search_queries": [
          "биохакинг для начинающих",
          "курсы биохакинга"
        ]
      },
      {
        "title": "Набор для домашнего тестирования на здоровье",
        "description": "Набор тестов, который позволяет проверить различные показатели здоровья в домашних условиях",
        "primary_gap": "the_optimizer",
        "reasoning": "Этот набор может помочь получателю оптимизировать свое здоровье и благополучие, получая актуальную информацию о своем состоянии",
        "search_queries": [
          "домашние тесты на здоровье",
          "набор для здоровья"
        ]
      },
      {
        "title": "Книга о биохакинге и здоровье",
        "description": "Книга, которая рассказывает о последних исследованиях и открытиях в области биохакинга и здоровья",
        "primary_gap": "the_mirror",
        "reasoning": "Эта книга может помочь получателю глубже понять себя и свои потребности, а также найти новые идеи для улучшения здоровья",
        "search_queries": [
          "книги о биохакинге",
          "здоровье и благополучие"
        ]
      }
    ]
  },
  "миксология": {
    "is_wide": false,
    "hypotheses": [
      {
        "title": "Курс по миксологии для начинающих",
        "description": "Онлайн-курс, который познакомит с основами миксологии и поможет понять, как создавать уникальные коктейли",
        "primary_gap": "the_catalyst",
        "reasoning": "Поскольку миксология является одним из интересов получателя, этот курс может помочь ему глубже понять тему и начать применять ее на практике",
        "search_queries": [
          "миксология для начинающих",
          "курсы миксологии"
        ]
      },
      {
        "title": "Набор для создания коктейлей",
        "description": "Набор инструментов и ингредиентов, который позволяет создавать уникальные коктейли в домашних условиях",
        "primary_gap": "the_optimizer",
        "reasoning": "Этот набор может помочь получателю оптимизировать процесс создания коктейлей и получать удовольствие от экспериментов",
        "search_queries": [
          "набор для коктейлей",
          "миксология набор"
        ]
      },
      {
        "title": "Книга о миксологии и коктейлях",
        "description": "Книга, которая рассказывает о истории и искусстве миксологии, а также предлагает рецепты уникальных коктейлей",
        "primary_gap": "the_mirror",
        "reasoning": "Эта книга может помочь получателю глубже понять себя и свои потребности, а также найти новые идеи для создания коктейлей",
        "search_queries": [
          "книги о миксологии",
          "коктейли и миксология"
        ]
      }
    ]
  },
  "инди-игры": {
    "is_wide": true,
    "question": "Какой тип инди-игр предпочитает получатель?",
    "branches": [
      "приключенческие игры",
      "стратегические игры",
      "игры с уникальной графикой"
    ]
  }
}
```
- llm_raw:classify_topic
```json
{
  "is_wide": true,
  "branches": [
    "биохакинг для улучшения сна",
    "биохакинг для повышения продуктивности",
    "биохакинг в питании и диете",
    "биохакинг для физической формы"
  ],
  "question": "В каком конкретном аспекте биохакинга интересуется получатель, например, улучшении сна, повышении продуктивности или оптимизации питания?",
  "refined_topic": null
}
```
- llm_raw:classify_topic
```json
{
  "is_wide": false,
  "branches": null,
  "question": null,
  "refined_topic": "миксология для биохакинга"
}
```
- llm_raw:classify_topic
```json
{
  "is_wide": false,
  "branches": null,
  "question": null,
  "refined_topic": "инди-игры с элементами биохакинга или миксологии"
}
```
- llm_raw:generate_hypotheses
```json
[
  {
    "title": "Игровой набор для биохакинга",
    "description": "Игровой набор, который позволяет игрокам исследовать элементы биохакинга и миксологии в виртуальной среде, применяя полученные знания в реальной жизни.",
    "primary_gap": "the_catalyst",
    "reasoning": "Получатель интересуется биохакингом и миксологией, и инди-игры могут стать отличным катализатором для изучения этих тем. Игровой набор позволитrecipient применить полученные знания в реальной жизни, что соответствует интересам и целям получателя.",
    "search_queries": [
      "биохакинг игры",
      "миксология игры",
      "инди-игры образование"
    ]
  },
  {
    "title": "Персонализированный игровой опыт",
    "description": "Персонализированный игровой опыт, который учитывает интересы и предпочтения получателя, такие как биохакинг и миксология, и предлагает уникальный игровой процесс.",
    "primary_gap": "the_mirror",
    "reasoning": "Получатель имеет определенные интересы и предпочтения, и персонализированный игровой опыт позволит ему увидеть себя в игре, что соответствует принципу the_mirror. Этот опыт также позволит получателю исследовать свои интересы в более глубоком уровне.",
    "search_queries": [
      "персонализированные игры",
      "биохакинг игры",
      "миксология игры"
    ]
  },
  {
    "title": "Игровое сообщество биохакеров и миксологов",
    "description": "Игровое сообщество, которое объединяет людей, интересующихся биохакингом и миксологией, и предлагает совместные игровые trải nghiệm и обсуждения.",
    "primary_gap": "the_anchor",
    "reasoning": "Получатель интересуется биохакингом и миксологией, и игровое сообщество позволит ему связаться с другими людьми, разделяющими эти интересы. Это соответствует принципу the_anchor, который фокусируется на укреплении связей между людьми.",
    "search_queries": [
      "биохакинг сообщество",
      "миксология сообщество",
      "игровое сообщество"
    ]
  },
  {
    "title": "Игровой журнал биохакинга и миксологии",
    "description": "Игровой журнал, который позволяет игрокам записывать свои прогресс и результаты в играх, связанных с биохакингом и миксологией, иReflect на своем опыте.",
    "primary_gap": "the_optimizer",
    "reasoning": "Получатель интересуется биохакингом и миксологией, и игровой журнал позволит ему отслеживать свой прогресс и результаты, что соответствует принципу the_optimizer. Этот журнал также позволит получателю Reflect на своем опыте и улучшать свои навыки.",
    "search_queries": [
      "игровой журнал",
      "биохакинг журнал",
      "миксология журнал"
    ]
  }
]
```
- llm_raw:generate_hypotheses
```json
[
  {
    "title": "Набор для здорового коктейля",
    "description": "Этот набор поможет ей создавать здоровые коктейли, которые соответствуют ее интересам в биохакинге и миксологии.",
    "primary_gap": "the_catalyst",
    "reasoning": "Поскольку она интересуется биохакингом и миксологией, этот набор может помочь ей экспериментировать с новыми рецептами и ингредиентами, поддерживая ее рост и развитие в этих областях.",
    "search_queries": [
      "набор для здорового коктейля",
      "биохакинг коктейли",
      "миксология набор"
    ]
  },
  {
    "title": "Книга о питании и миксологии",
    "description": "Эта книга поможет ей лучше понять связь между питанием и миксологией, что соответствует ее интересам в биохакинге.",
    "primary_gap": "the_mirror",
    "reasoning": "Поскольку она интересуется биохакингом и миксологией, эта книга может помочь ей увидеть себя в новом свете, как человека, который заботится о своем здоровье и благополучии.",
    "search_queries": [
      "книга о питании и миксологии",
      "биохакинг питание",
      "миксология здоровье"
    ]
  },
  {
    "title": "Онлайн-курс по созданию коктейлей для здоровья",
    "description": "Этот курс поможет ей научиться создавать коктейли, которые поддерживают ее здоровье и благополучие, что соответствует ее интересам в биохакинге и миксологии.",
    "primary_gap": "the_optimizer",
    "reasoning": "Поскольку она интересуется биохакингом и миксологией, этот курс может помочь ей оптимизировать свой подход к здоровью и благополучию, делая ее жизнь более эффективной и приятной.",
    "search_queries": [
      "онлайн-курс по созданию коктейлей для здоровья",
      "биохакинг коктейли курс",
      "миксология здоровье онлайн"
    ]
  },
  {
    "title": "Набор для ароматизации коктейлей с натуральными ингредиентами",
    "description": "Этот набор поможет ей создавать коктейли с натуральными ингредиентами, что соответствует ее интересам в биохакинге и миксологии.",
    "primary_gap": "the_permission",
    "reasoning": "Поскольку она интересуется биохакингом и миксологией, этот набор может помочь ей дать себе разрешение наслаждаться здоровыми коктейлями, не чувствуя вины или ограничения.",
    "search_queries": [
      "набор для ароматизации коктейлей с натуральными ингредиентами",
      "биохакинг коктейли натуральные",
      "миксология натуральные ингредиенты"
    ]
  }
]
```
- session.topics
```json
[
  "биохакинг",
  "миксология",
  "инди-игры"
]
```
- tracks.summary
```json
[
  {
    "topic": "биохакинг",
    "status": "question",
    "hypotheses": [],
    "question": "В каком конкретном аспекте биохакинга интересуется получатель, например, улучшении сна, повышении продуктивности или оптимизации питания?",
    "question_options": [
      "биохакинг для улучшения сна",
      "биохакинг для повышения продуктивности",
      "биохакинг в питании и диете",
      "биохакинг для физической формы"
    ]
  },
  {
    "topic": "миксология",
    "status": "ready",
    "hypotheses": [
      "Набор для здорового коктейля",
      "Книга о питании и миксологии",
      "Онлайн-курс по созданию коктейлей для здоровья",
      "Набор для ароматизации коктейлей с натуральными ингредиентами"
    ],
    "question": null,
    "question_options": []
  },
  {
    "topic": "инди-игры",
    "status": "ready",
    "hypotheses": [
      "Игровой набор для биохакинга",
      "Персонализированный игровой опыт",
      "Игровое сообщество биохакеров и миксологов",
      "Игровой журнал биохакинга и миксологии"
    ],
    "question": null,
    "question_options": []
  }
]
```

**Checks**
- [PASS] session has tracks or probe
- [PASS] hypotheses have titles
- [PASS] no duplicate hypothesis titles
- [PASS] RU language output

---

## Scenario: Classify Topic: Music

**Input**
```json
{
  "topic": "Музыка",
  "quiz": {
    "relationship": null,
    "gifting_goal": null,
    "effort_level": "low",
    "session_mode": "thoughtful",
    "budget": null,
    "deadline_days": null,
    "language": "ru",
    "recipient_age": 30,
    "recipient_gender": null,
    "occasion": null,
    "vibe": null,
    "interests": [
      "Музыка"
    ],
    "interests_description": null
  }
}
```

**LLM Timings**
- `classify_topic`: 5.81s

**Outputs**
- llm_raw:classify_topic
```json
{
  "is_wide": true,
  "branches": [
    "Инструменты для музыки",
    "Музыкальные жанры",
    "Музыкальные фестивали и концерты",
    "Оборудование для звука"
  ],
  "question": "Какой аспект музыки интересует получателя больше всего?",
  "refined_topic": null
}
```
- classify_topic
```json
{
  "is_wide": true,
  "branches": [
    "Инструменты для музыки",
    "Музыкальные жанры",
    "Музыкальные фестивали и концерты",
    "Оборудование для звука"
  ],
  "question": "Какой аспект музыки интересует получателя больше всего?",
  "refined_topic": null
}
```

**Checks**
- [PASS] is_wide present
- [PASS] wide topic likely
- [PASS] wide topic has question
- [PASS] wide topic has branches

---

## Scenario: Personalized Probe: dead_end

**Input**
```json
{
  "context_type": "dead_end",
  "quiz": {
    "relationship": null,
    "gifting_goal": null,
    "effort_level": "low",
    "session_mode": "thoughtful",
    "budget": null,
    "deadline_days": null,
    "language": "ru",
    "recipient_age": 45,
    "recipient_gender": null,
    "occasion": null,
    "vibe": null,
    "interests": [
      "Винил"
    ],
    "interests_description": null
  }
}
```

**LLM Timings**
- `generate_personalized_probe:dead_end`: 0.81s

**Outputs**
- llm_raw:generate_personalized_probe:dead_end
```json
{
  "question": "Есть ли у человека особый ритуал или место, связанные с прослушиванием виниловых пластинок, которое делает этот опыт особенно приятным или уютным?",
  "options": [
    "Да, у него есть особое место для прослушивания музыки",
    "Да, он любит слушать музыку во время выполнения определенных действий",
    "Нет, он обычно слушает музыку где угодно",
    "Не уверен"
  ]
}
```
- probe
```json
{
  "question": "Есть ли у человека особый ритуал или место, связанные с прослушиванием виниловых пластинок, которое делает этот опыт особенно приятным или уютным?",
  "options": [
    "Да, у него есть особое место для прослушивания музыки",
    "Да, он любит слушать музыку во время выполнения определенных действий",
    "Нет, он обычно слушает музыку где угодно",
    "Не уверен"
  ]
}
```

**Checks**
- [PASS] probe has question

---

## Scenario: Topic Hints

**Input**
```json
{
  "quiz": {
    "relationship": null,
    "gifting_goal": null,
    "effort_level": "low",
    "session_mode": "thoughtful",
    "budget": null,
    "deadline_days": null,
    "language": "ru",
    "recipient_age": 28,
    "recipient_gender": null,
    "occasion": null,
    "vibe": null,
    "interests": [
      "Кофе"
    ],
    "interests_description": null
  },
  "topics_explored": [
    "Кофе"
  ]
}
```

**LLM Timings**
- `generate_topic_hints`: 6.53s

**Outputs**
- llm_raw:generate_topic_hints
```json
[
  {
    "question": "Есть ли у него особое место, где он любит пить кофе?",
    "reasoning": "Чтобы исследовать домашнюю обстановку и потенциальные ритуалы, связанные с кофе"
  },
  {
    "question": "Участвует ли он в каких-либо спортивных или активных мероприятиях, которые могут требовать специального снаряжения или аксессуаров?",
    "reasoning": "Чтобы открыть потенциальные физические интересы или хобби, которые не были упомянуты ранее"
  },
  {
    "question": "Есть ли у него близкий друг или член семьи, который разделяет его интересы или имеет похожие занятия?",
    "reasoning": "Чтобы исследовать социальные связи и потенциальные общие интересы, которые могут расширить наше понимание его личности"
  },
  {
    "question": "Есть ли у него какие-либо творческие занятия или хобби, которыми он занимается в свободное время?",
    "reasoning": "Чтобы открыть потенциальные творческие интересы или таланты, которые не были упомянуты ранее"
  },
  {
    "question": "Планирует ли он какие-либо крупные изменения или события в своей жизни, такие как переезд или смена работы?",
    "reasoning": "Чтобы исследовать потенциальные изменения или события, которые могут повлиять на его интересы или потребности"
  }
]
```
- topic_hints
```json
[
  {
    "question": "Есть ли у него особое место, где он любит пить кофе?",
    "reasoning": "Чтобы исследовать домашнюю обстановку и потенциальные ритуалы, связанные с кофе"
  },
  {
    "question": "Участвует ли он в каких-либо спортивных или активных мероприятиях, которые могут требовать специального снаряжения или аксессуаров?",
    "reasoning": "Чтобы открыть потенциальные физические интересы или хобби, которые не были упомянуты ранее"
  },
  {
    "question": "Есть ли у него близкий друг или член семьи, который разделяет его интересы или имеет похожие занятия?",
    "reasoning": "Чтобы исследовать социальные связи и потенциальные общие интересы, которые могут расширить наше понимание его личности"
  },
  {
    "question": "Есть ли у него какие-либо творческие занятия или хобби, которыми он занимается в свободное время?",
    "reasoning": "Чтобы открыть потенциальные творческие интересы или таланты, которые не были упомянуты ранее"
  },
  {
    "question": "Планирует ли он какие-либо крупные изменения или события в своей жизни, такие как переезд или смена работы?",
    "reasoning": "Чтобы исследовать потенциальные изменения или события, которые могут повлиять на его интересы или потребности"
  }
]
```

**Checks**
- [PASS] hints not empty

---

## Scenario: Interaction Persistence

**Input**
```json
{
  "quiz": {
    "relationship": null,
    "gifting_goal": null,
    "effort_level": "low",
    "session_mode": "thoughtful",
    "budget": null,
    "deadline_days": null,
    "language": "ru",
    "recipient_age": 28,
    "recipient_gender": null,
    "occasion": null,
    "vibe": null,
    "interests": [
      "Кофе"
    ],
    "interests_description": null
  }
}
```

**LLM Timings**
- `normalize_topics`: 5.49s
- `generate_hypotheses_bulk`: 6.77s
- `classify_topic`: 5.84s

**Outputs**
- llm_raw:normalize_topics
```json
[
  "Кофе"
]
```
- llm_raw:generate_hypotheses_bulk
```json
{
  "Кофе": {
    "is_wide": false,
    "hypotheses": [
      {
        "title": "Кофейный мастер-класс",
        "description": "Мастер-класс по приготовлению кофе с профессиональным баристой",
        "primary_gap": "the_catalyst",
        "reasoning": "Поскольку в интересах указан кофе, вероятно, человек хочет расширить свои знания и навыки в этой области. Мастер-класс по кофе может предоставить этому человеку новые знания и опыт.",
        "search_queries": [
          "кофейный мастер-класс",
          "кофе обучение",
          "бариста курс"
        ]
      },
      {
        "title": "Смарт-кофеварка",
        "description": "Умная кофеварка с возможностью регулировать температуру и вкус кофе",
        "primary_gap": "the_optimizer",
        "reasoning": "Смарт-кофеварка может сделать процесс приготовления кофе более удобным и комфортным, что соответствует принципу оптимизации.",
        "search_queries": [
          "смарт кофеварка",
          "умная кофеварка",
          "кофеварка с регулировкой температуры"
        ]
      },
      {
        "title": "Кофейная подписка",
        "description": "Ежемесячная подписка на кофе с возможностью выбора разных сортов и вкусов",
        "primary_gap": "the_permission",
        "reasoning": "Кофейная подписка может предоставить человеку возможность попробовать новые сорта кофе и удовлетворить свою любовь к кофе, что соответствует принципу разрешения наслаждаться.",
        "search_queries": [
          "кофейная подписка",
          "подписка на кофе",
          "кофе клуб"
        ]
      }
    ]
  }
}
```
- llm_raw:classify_topic
```json
{
  "is_wide": true,
  "branches": [
    "Кофейные зерна",
    "Кофемашины",
    "Аксессуары для кофе",
    "Кофейные напитки"
  ],
  "question": "Какой аспект кофе интересует получателя больше всего: вкус, процесс приготовления илиperhaps что-то другое?",
  "refined_topic": null
}
```

**Checks**
- [WARN] interaction persisted — no hypothesis to like

---
